# Trading Bot Environment Configuration
# Copy this file to .env and fill in your values

# =====================================================
# DATABASE
# =====================================================
DATABASE_URL=postgresql://trader:trader_secret@localhost:5432/trader
DATABASE_MAX_CONNECTIONS=10

# =====================================================
# REDIS
# =====================================================
REDIS_URL=redis://localhost:6379
REDIS_MAX_CONNECTIONS=5

# =====================================================
# API SERVER
# =====================================================
API_HOST=127.0.0.1
API_PORT=3000
API_CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# =====================================================
# AUTHENTICATION
# =====================================================
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRY_HOURS=24

# Encryption key for API keys (32 bytes, base64 encoded)
ENCRYPTION_KEY=your-32-byte-encryption-key-here-base64

# 알림 활성화 여부
TELEGRAM_ENABLED=true

# 알림 레벨 (all / important / critical)
# all: 모든 알림 (체결, 신호, 리포트 등)
# important: 주요 알림 (체결, 일일 리포트)
# critical: 긴급 알림만 (손절, 에러, 리스크 경고)
TELEGRAM_ALERT_LEVEL=all

# =====================================================
# LOGGING
# =====================================================
RUST_LOG=info,trader_core=debug,trader_strategy=debug
LOG_FORMAT=pretty
# Options: pretty, json, compact

# =====================================================
# BACKGROUND TASKS
# =====================================================
# Fundamental 데이터 백그라운드 수집기
# true로 설정하면 서버 시작 시 Yahoo Finance에서 펀더멘털 데이터 수집 시작
FUNDAMENTAL_COLLECT_ENABLED=false

# 수집 주기 (초, 기본: 3600 = 1시간)
FUNDAMENTAL_COLLECT_INTERVAL_SECS=3600

# 데이터 갱신 기준 (일, 기본: 7일 - 7일 이상 된 데이터 재수집)
FUNDAMENTAL_STALE_DAYS=7

# 배치당 처리할 심볼 수 (기본: 50)
FUNDAMENTAL_BATCH_SIZE=50

# Yahoo Finance API 요청 간 딜레이 (밀리초, 기본: 2000 - Rate limiting 방지)
FUNDAMENTAL_REQUEST_DELAY_MS=2000

# OHLCV 캔들 데이터 증분 업데이트 여부 (기본: true)
# 펀더멘털 수집 시 같은 API 호출로 1년치 일봉 데이터도 함께 저장
FUNDAMENTAL_UPDATE_OHLCV=true

# 심볼 자동 동기화 활성화 (기본: true)
# 수집 전 KRX/Binance/Yahoo에서 종목 목록 자동 가져오기
FUNDAMENTAL_AUTO_SYNC_SYMBOLS=true

# =====================================================
# DATA PROVIDERS (데이터 프로바이더)
# =====================================================
# KRX API 활성화 (OHLCV, Fundamental)
# KRX OPEN API 승인 후 true로 변경
PROVIDER_KRX_API_ENABLED=false

# Yahoo Finance 활성화 (OHLCV)
PROVIDER_YAHOO_ENABLED=true

# 네이버 금융 크롤러 활성화 (KR 시장 Fundamental)
# KRX API 없이도 PER, PBR, ROE, 섹터, 시장타입(KOSPI/KOSDAQ/ETF) 수집 가능
NAVER_FUNDAMENTAL_ENABLED=true

# 네이버 요청 간 딜레이 (밀리초, 기본: 300)
# 너무 빠르면 Rate limit에 걸릴 수 있음
NAVER_REQUEST_DELAY_MS=300

# =====================================================
# OHLCV COLLECTION (OHLCV 데이터 수집)
# =====================================================
# 수집 대상 시장 (콤마로 구분, 비어있으면 전체)
# 사용 가능: KR (한국), US (미국), CRYPTO (암호화폐)
# 예: KR,US (한국/미국만), KR (한국만)
# OHLCV_TARGET_MARKETS=KR,US

# 요청 간 딜레이 (밀리초, 기본: 500)
# OHLCV_REQUEST_DELAY_MS=500

# 배치당 처리할 심볼 수 (기본: 50)
# OHLCV_BATCH_SIZE=50

# 데이터 갱신 기준 (일, 기본: 1)
# OHLCV_STALE_DAYS=1

# =====================================================
# SYMBOL SYNC (심볼 자동 동기화)
# =====================================================
# 최소 심볼 수 (이 수 이하면 동기화 실행, 기본: 100)
SYMBOL_SYNC_MIN_COUNT=100

# KRX(한국거래소) 동기화 활성화 (기본: true)
# KOSPI/KOSDAQ 전 종목 (~2,500개)
SYMBOL_SYNC_KRX=true

# Binance(암호화폐) 동기화 활성화 (기본: false)
# USDT 거래 페어 (~300개)
SYMBOL_SYNC_BINANCE=false

# Yahoo Finance(미국 주식) 동기화 활성화 (기본: true)
# S&P 500, NASDAQ 등 주요 지수 종목
SYMBOL_SYNC_YAHOO=true

# Yahoo 최대 수집 종목 수 (기본: 500)
SYMBOL_SYNC_YAHOO_MAX=500

# =====================================================
# GENERAL
# =====================================================
# Environment: development, staging, production
ENVIRONMENT=development
